<?php
$GLOBALS['nav'] = $this;

if (!function_exists("createMenuHtmlRecursive") ){

    function linkImage ( $level ) {
        $linkImgSrc  = "/img/uikit/link.png";
        
        return ( $level == 0 ) ? '<img src="' . $linkImgSrc . '" class="links">' : '';
    };

    function createMenuHtmlRecursive($page, $level) {
        if ($page->isVisible() && $GLOBALS['nav']->navigation()->accept($page)) {
            echo
                '<a href="' . $page->getUri() . '">' .
                linkImage($level) .
                    "<li class='level_$level'>" .
                            $page->getLabel();
            if ($page->hasPages()) {
                $nextLevel = $level + 1;
                echo '<ul class="ul_level_' . $nextLevel . '">';
                foreach ($page->getPages() as $child) {
                    createMenuHtmlRecursive($child, $nextLevel);
                }
                echo '</ul>';
            }
            echo '</li></a>';
        }
        return;
    }
}
echo '<ul class="navigation">';
foreach($container->getPages() as $child) {
    createMenuHtmlRecursive($child, 0);

}
echo '</ul>';
?>
